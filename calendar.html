<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<link rel="stylesheet" href="">
<title>Document</title>
</head>
 
	<style type="text/css">

		* {
			padding: 0;
			margin: 0;
		}
		.wrapper {
			overflow: hidden;
			margin : 100px auto 0 auto;
			width: 500px;
			border: 1px solid black;
		}
		.wrapper .title {
			overflow: auto;
			height: 50px;
			line-height: 50px;
			font-size: 18px;
			font-weight: 900px;
			color: #fff;
			background-color: blue;
		}
		.wrapper .title .yd {
			text-align: center;
		}
		.wrapper .title .pm{
			float: left;
			cursor: pointer;
		}
		.wrapper .title .pm:hover{
			color: #000;
		}
		.wrapper .title .nm{
			color:#fff;
			float: right;
			cursor: pointer;
		}
		.wrapper .title .nm:hover{
			color: #000;
		}
		.wrapper table {
			width: 500px;
			text-align: center; 
			border-collapse: collapse;
			color: gray;
		}
		.wrapper table th {
			border: 1px solid lightslategray;
			height: 40px
		}
		.wrapper table td {
			border: 1px solid gray;
			height: 40px
		}
		.wrapper .red {
			color: red;
		}
		.wrapper .blue {
			color: blue;
		}	
	</style>

<body>
	
		<div id = "wrapper" class = "wrapper">
			<!-- <div class = "title">
				<div class = "pm">
					<span class = "month">7</span>月
				</div>
			 	<div class = "yd">
					<span class = "year">2016</span>年
					<span class = "day">8</span>月
				</div>
				<div class = "nm">
					<span class = "month">9</span>月
				</div>
			</div>
			<table>
				<thead>
					<th class = "red">周日</th>
					<th>周一</th>
					<th>周二</th>
					<th>周三</th>
					<th>周四</th>
					<th>周五</th>
					<th class = "red">周六</th>
				</thead>
				<tbody>
					<tr>
						<td></td>
						<td>1</td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
					</tr>
					<tr>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
					</tr>
					<tr>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
					</tr>
					<tr>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
					</tr>
					<tr>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
					</tr>
					<tr>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
					</tr>
				</tbody>
			</table> -->
		</div>
		<script type="text/javascript" src = "jquery.js"></script>
		<script type="text/javascript">
		
		var $Div = document.getElementById('wrapper');
		var oDate = new Date(); 
		// console.log(oDate);
		var oYear = oDate.getFullYear();
		console.log(oYear);
		var oMonth = oDate.getMonth() + 1;
		// console.log(oMonth);
		var oDay = oDate.getDate();
		// console.log(oDay);
		function initDate () {
			var oDate = new Date();
			var dataDate = {};
			dataDate.oDateObj = oDate;
			dataDate.month = oDate.getMonth() + 1;
			// console.log(dataDate.month);
			dataDate.year = oDate.getFullYear();
			showDate(dataDate);
		}

		initDate();

		function bindEvent () {   //点击事件有点小bug，有的时候好使，有的时候不好使，想不出来了~~~~
			var oSpanPm = document.getElementById('pm');
			var oSpanNm = document.getElementById('nm');
			// console.log(oSpanPm);
			// console.log(oSpanNm);
			// oSpanPm.addEventListener('click', turnPage, false);
			// oSpanNm.addEventListener('click', turnPage, false);
			if(!!oSpanPm && !oSpanPm.flag){
				oSpanPm.flag = true;
				oSpanPm.onclick = turnPage;
				console.log(oSpanNm);	
			// }else {
			// 	alert(0);
			// 	oSpanNm.flag = true;
				oSpanNm.onclick = turnPage;
				console.log(oSpanNm);
			}			
			// if(!!oSpanPm && !oSpanPm.flag){
			// 	oSpanPm.flag = true;
			// 	oSpanPm.onclick = turnPage;
			// 	oSpanPm.flag = true;
			// 	console.log(oSpanNm);	
			// }else {
			// 	alert(0);
			// 	oSpanNm.flag = true;
			// 	oSpanNm.onclick = turnPage;
			// 	console.log(oSpanNm);
			// }
		}
		function turnPage(event) {
			var oNowSpan = document.getElementsByClassName('title')[0].getElementsByTagName('span');
			// console.log(oNowSpan);
			var oDate = new Date();
			var dataDate = {};
			dataDate.oDateObj = oDate;
			$Div.innerText = "";
			if(event.target.className === "pm"){
				var Month = parseInt(oNowSpan[0].innerHTML);
				// console.log(Month);
				var Year = parseInt(oNowSpan[1].innerHTML);
				// console.log(Year);
				dataDate.month = Month;
				if(Month == 12){
						dataDate.year = Year - 1;
						dataDate.month = Month;
						// console.log(Year - 1);
						// console.log(Month);
						showDate(dataDate);						
				}else {
					// console.log(Month);
					dataDate.year = Year;
					dataDate.month = Month;
					showDate(dataDate);
				}
			}else if(event.target.className === "nm"){
					var Month = parseInt(oNowSpan[3].innerHTML);
					var Year = parseInt(oNowSpan[1].innerHTML);
					dataDate.month = Month;
					// console.log(Month);
					if(Month == 1) {
						dataDate.year = Year + 1;
						dataDate.month = Month;
						showDate(dataDate);
					}else {
						// console.log(Month);
						dataDate.year = Year;
						dataDate.month = Month;
						showDate(dataDate);
					}
				}
			}

		function isLeapYear (year) {
			if(year % 4 == 0 && year % 100 !== 0){
				return true;
			}else {
				if(year % 400 == 0){
					return true;
				}else{
					return false;
				}
			}
		}
		function createDay(oTd, index, dayNumb, nowMonth, nowYear) {
			for(var i = 0; i < dayNumb; i++){
				// console.log(oTd[1].innerHTML);
				oTd[i + index].innerHTML = i + 1;
				if((i + 1) == oDay && nowMonth == oMonth && nowYear == oYear){
					oTd[i + index].className = 'red';
				}else if((i + 1) > oDay && nowMonth == oMonth && nowYear == oYear){
					oTd[i + index].className = 'blue';
				}
			}
		}
		function showDate (oDate) {
			var $Title = document.createElement('div');
			$Title.setAttribute('class', 'title');
			// $Title.className = 'title';
			// console.log(oDate.month);
			var strDate = "<div id = 'pm' class = 'pm'><span class = 'month'>" + ((oDate.month - 1) === 0 ? 12 : (oDate.month - 1)) + "</span>月</div><div class = 'yd'><span class = 'year'>" + oDate.year + "</span>年<span class = 'day'>" + oDate.month + "</span>月</div><div id = 'nm' class = 'nm'><span class = 'month'>" + ((oDate.month + 1 === 13) ? 1 : (oDate.month + 1)) + "</span>月</div>";
			$Title.innerHTML = strDate;
			$Div.appendChild($Title);

			bindEvent();

			var $Table = document.createElement('table');
			var $Thead = document.createElement('thead');
			// var $Tr = document.createElement('tr');
			var arrWeek = ['周日', '周一', '周二', '周三', '周四', '周五', '周六'];
			for(i = 0; i < 7;i++){
				var $Th = document.createElement('th');
				$Th.innerHTML = arrWeek[i];
				if(i == 0 || i == 6){
					$Th.className = "red";
				}
				$Thead.appendChild($Th);
			}
			// $Thead.appendChild($Tr);
			$Table.appendChild($Thead);

			var $Tbody = document.createElement('tbody');
			for(var i = 0; i < 6; i++){
				var $Tr = document.createElement('tr');
				for(var j = 0; j < 7; j++){
					var $Td = document.createElement('td');
					$Tr.appendChild($Td);
				}
				$Tbody.appendChild($Tr);
			}
			$Table.appendChild($Tbody);
			$Div.appendChild($Table);

			var dayNumb;
			if(oDate.month == 1 || oDate.month == 3 || oDate.month == 5 || oDate.month  == 7 || oDate.month == 8 || oDate.month == 10 || oDate.month == 12){
				dayNumb = 31;
			}else if (oDate.month == 4 || oDate.month == 6 || oDate.month == 9 || oDate.month == 11){
				dayNumb = 30;
			}else {
				if (oDate.month == 2 && isLeapYear(oDate.year)) {
					dayNumb = 29;
				}else {
					dayNumb = 28;
				}
			}
			var $TdCollection = $Div.getElementsByTagName('td');
			var nowDay = oDate.oDateObj.getDate();
			var nowMonth = oDate.month;
			var nowYear = oDate.year;
			// console.log(nowYear);
			oDate.oDateObj.setFullYear(oDate.year);
			oDate.oDateObj.setMonth(oDate.month - 1);
			oDate.oDateObj.setDate(1);
			// console.log(oDate.oDateObj.getDay());
			switch(oDate.oDateObj.getDay()){
				case 0 :
					createDay($TdCollection, 0, dayNumb, nowMonth, nowYear);
					break;
				case 1 :
					createDay($TdCollection, 1, dayNumb, nowMonth, nowYear);
					break;
				case 2 :
					createDay($TdCollection, 2, dayNumb, nowMonth, nowYear);
					break;
				case 3 :
					createDay($TdCollection, 3, dayNumb, nowMonth, nowYear);
					break;
				case 4 :
					createDay($TdCollection, 4, dayNumb, nowMonth, nowYear);
					break;
				case 5 :
					createDay($TdCollection, 5, dayNumb, nowMonth);
					break;
				case 6 :
					createDay($TdCollection, 6, dayNumb, nowMonth);
					break;
			}
		}





		</script>
</body>
</html>